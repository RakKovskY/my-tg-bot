import asyncio #–¥–ª—è –∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏
import logging #–¥–ª—è –≤—ã–≤–æ–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Å–æ–ª—å
from aiogram import Bot, Dispatcher, Router #–æ—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã aiogram
from aiogram.filters import Command #–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥
from aiogram.types import Message #–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
from config import BOT_TOKEN #–∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω –∏–∑ config.py
from aiogram.types import ReplyKeyboardMarkup, KeyboardButton, ReplyKeyboardRemove #–î–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –∫–Ω–æ–ø–æ–∫
from aiogram import F # –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ (–∫–Ω–æ–ø–æ–∫)

#–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ(—á—Ç–æ –±—ã –≤–∏–¥–µ—Ç—å —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç)
logging.basicConfig(level=logging.INFO) # –≤—ã–≤–æ–¥–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∫–æ–Ω—Å–æ–ª—å

#—Å–æ–∑–¥–∞—ë–º —Ç–µ–ª–æ –±–æ—Ç–∞
bot = Bot(token=BOT_TOKEN)

#–°–æ–∑–¥–∞—ë–º –¥–∏—Å–ø–µ—Ç—á–µ—Ä - —ç—Ç–æ –º–æ–∑–≥ –±–æ—Ç–∞ –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç —á—Ç–æ –¥–ª–µ–∞—Ç—å —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
dp = Dispatcher()

#–°–æ–∑–¥–∞—ë–º —Ä–æ—É—Ç–µ—Ä - —ç—Ç–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∫ –Ω—É–∂–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º
router = Router()

#–°–æ–∑–¥–∞—ë–º –∫–ª–∞–≤–∏–∞—Ç—É—Ä—É
#ReplyKeyboardMarkup - –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –ø–æ–¥ –ø–æ–ª–µ–º –≤–≤–æ–¥–∞
main_keyboard = ReplyKeyboardMarkup(
    keyboard=[
        #–ø–µ—Ä–≤—ã–π —Ä—è–¥ –∫–Ω–æ–ø–æ–∫ (–¥–≤–µ –∫–Ω–æ–ø–∫–∏ —Ä—è–¥–æ–º)
        [
            KeyboardButton(text="üëã–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ!"),
            KeyboardButton(text="‚ùì–ü–æ–º–æ—â—å")
        ],
        #–í—Ç–æ—Ä–æ–π —Ä—è–¥ –∫–Ω–æ–ø–æ–∫\
        [
            KeyboardButton(text="‚ÑπÔ∏è–û –±–æ—Ç–µ"),
            KeyboardButton(text="üé≤–°–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ")
        ],
        #–¢—Ä–µ—Ç–∏–π —Ä—è–¥ (–æ–¥–Ω–∞ –±–æ–ª—å—à–∞—è –∫–Ω–æ–ø–∫–∞)
        [
            KeyboardButton(text="üìû–ú–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã")
        ]
    ],
    resize_keyboard = True, #–ö–Ω–æ–ø–∫–∏ –ø–æ–¥—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –ø–æ–¥ —Ä–∞–∑–º–µ—Ä —ç–∫—Ä–∞–Ω–∞
    one_time_keyboard = False, #–∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –Ω–µ —Å–∫—Ä—ã–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –Ω–∞–∂–∞—Ç–∏—è
    input_field_placeholder = "–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ..." #—Ç–µ–∫—Å—Ç-–ø–æ–¥—Å–∫–∞–∑–∫–∞ –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
)

#–≥–æ–≤–æ—Ä–∏–º –¥–∏—Å–ø–µ—Ç—á–µ—Ä—É –∏—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ—Ç —Ä–æ—É—Ç–µ—Ä
dp.include_router(router)

#—Å–æ–∑–¥–∞–µ–º –∫–æ–º–º–∞–Ω–¥—É start
#@router.message - —ç—Ç–æ "–î–ï–ö–û–†–ê–¢–û–†", –æ–Ω –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é
#Command("start") - –≥–æ–≤–æ—Ä–∏—Ç "—ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã start"

@router.message(Command("start"))
async def cmd_start(message:Message):
    #message.from_user.first_name - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ TG
    user_name = message.from_user.first_name

    welcome_text = f"""
–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é —Ç–µ–±—è, {user_name}!
 –Ø –ø–µ—Ä–≤—ã–π —Ç–≥ –±–æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –Ø—Ä–æ—Å–ª–∞–≤,
 –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ python —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º  aiogram 3.10.0

 –ü–æ–ø—Ä–æ–±—É–π –∫–æ–º–∞–Ω–¥—ã:
 /start - —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
 /help - –ø–æ–º–æ—â—å
"""
    # –æ—Ç–ø—Ä–æ–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    # await - –ø–æ–¥–æ–∂–¥–∏ –ø–æ–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è
    # message.answer - –º–µ—Ç–æ–¥ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
    await message.answer(welcome_text, reply_markup=main_keyboard)

@router.message(Command("help"))
async def cmd_help(message:Message):
    help_text = """
üìö –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥:

/start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
/help - –ü–æ–ª—É—á–∏—Ç—å —Å–ø—Ä–∞–≤–∫—É

üéÆ –ß—Ç–æ —è —É–º–µ—é:
‚Ä¢ –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—ã
‚Ä¢ –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫–∏
‚Ä¢ –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–µ —á–∏—Å–ª–∞
‚Ä¢ –ü–æ–≤—Ç–æ—Ä—è—Ç—å —Ç–≤–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è

–ü—Ä–æ—Å—Ç–æ –Ω–∞–∂–∏–º–∞–π –∫–Ω–æ–ø–∫–∏ –∏ —ç–∫—Å–ø–µ—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–π ‚ú®
"""
    await message.answer(help_text)

#–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ"
#F.text == "–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ" - —Ñ–∏–ª—å—Ç—Ä: "–ï—Å–ª–∏ —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Ä–∞–≤–µ–Ω '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ'"
@router.message(F.text=="üëã–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ!")
async def hello_btn(message:Message):
    response = F"–ü—Ä–∏–≤–µ—Ç, {message.from_user.first_name}, —Ä–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å!"
    await message.answer(response)

@router.message(F.text=="‚ùì–ü–æ–º–æ—â—å")
async def help_btn(message:Message):
    response = """
üìö –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥:

/start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
/help - –ü–æ–ª—É—á–∏—Ç—å —Å–ø—Ä–∞–≤–∫—É

üéÆ –ß—Ç–æ —è —É–º–µ—é:
‚Ä¢ –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—ã
‚Ä¢ –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –∫–Ω–æ–ø–∫–∏
‚Ä¢ –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–ª—É—á–∞–π–Ω—ã–µ —á–∏—Å–ª–∞
‚Ä¢ –ü–æ–≤—Ç–æ—Ä—è—Ç—å —Ç–≤–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è

–ü—Ä–æ—Å—Ç–æ –Ω–∞–∂–∏–º–∞–π –∫–Ω–æ–ø–∫–∏ –∏ —ç–∫—Å–ø–µ—Ä–µ–º–µ–Ω—Ç–∏—Ä—É–π ‚ú®
"""
    await message.answer(response)

@router.message(F.text=="‚ÑπÔ∏è–û –±–æ—Ç–µ")
async def about_btn(message:Message):
    response = """
üìä –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ:

–í–µ—Ä—Å–∏—è: 2.0 (—Å –∫–Ω–æ–ø–∫–∞–º–∏!)
–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞: aiogram 3.10.0
–Ø–∑—ã–∫: Python 3.11
–ê–≤—Ç–æ—Ä: –Ø—Ä–æ—Å–ª–∞–≤! üéâ

üìç –ë–æ—Ç —Å–æ–∑–¥–∞–Ω –≤ —Ä–µ–¥–∞–∫—Ç–æ—Ä–µ VS Code
üìç –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
üìç –ò–º–µ–µ—Ç –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É
"""
    await message.answer(response)

@router.message(F.text=="üìû–ú–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã")
async def contact_btn(message:Message):
    response = """
üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã:

Telegram: @YarikRaak
Email: yaroslav.lagoshin2005@gmail.com
GitHub: github.com/RakKovskY

üîß –≠—Ç–æ—Ç –±–æ—Ç - —É—á–µ–±–Ω—ã–π –ø—Ä–æ–µ–∫—Ç.
"""
    await message.answer(response)

@router.message(F.text=="üé≤–°–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ")
async def rand_int(message:Message):
    import random
    random_number = random.randint(1,100)
    response = f"–¢–µ–±–µ –≤—ã–ø–∞–ª–æ: {random_number}"
    await message.answer(response)

#—Å–æ–∑–¥–∞—ë–º —ç—Ö–æ –±–æ—Ç
#@router.message() - –ª–æ–≤–∏—Ç –í–°–ï —Å–æ–æ–±—â–µ–Ω–∏—è
@router.message()
async def echo_msg(message:Message):
    #—Å–ø–∏—Å–æ–∫ —Ç–µ–∫—Å—Ç–æ–≤ –∫–Ω–æ–ø–æ–∫
    keyboard_text = ["üëã–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ!", "‚ùì–ü–æ–º–æ—â—å",
                     "‚ÑπÔ∏è–û –±–æ—Ç–µ", "üé≤–°–ª—É—á–∞–π–Ω–æ–µ —á–∏—Å–ª–æ",
                     "üìû–ú–æ–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã"
                     ]
    
    #–ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π
    if message.text.startswith('/'):
        return
    
    # –µ—Å–ª–∏ —ç—Ç–æ —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –≤—ã—Ö–æ–¥–∏–º
    if message.text in keyboard_text:
        return
    
    #–ø–æ–ª—É—á–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user_text = message.text

    #—Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç
    response = f"–í—ã –Ω–∞–ø–∏—Å–∞–ª–∏: {user_text}!"

    #–æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
    await message.answer(response)

#–≥–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞
async def main():
    print("=" * 50)  # —Ä–∏—Å—É–µ–º –ª–∏–Ω–∏—é –∏–∑ 50 –∑–Ω–∞–∫–æ–≤ =
    print("ü§ñ –ó–ê–ü–£–°–ö–ê–ï–ú –¢–ï–õ–ï–ì–†–ê–ú-–ë–û–¢–ê...")
    print("=" * 50)
    print("‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!")
    print("üîç –ò—â–∏—Ç–µ –±–æ—Ç–∞ –≤ Telegram –ø–æ username")
    print("üí¨ –ù–∞–ø–∏—à–∏—Ç–µ –µ–º—É /start")
    print("üõë –ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏")
    print("=" * 50)

    # –∑–∞–ø—É—Å–∫–∞–µ–º –æ–ø—Ä–æ—Å —Å–µ—Ä–≤–µ—Ä–æ–≤ TG
    #start_polling - –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç: "–ï—Å—Ç—å –ª–∏ –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è"!
    await dp.start_polling(bot)

#–°–æ–∑–¥–∞—ë–º —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É
if __name__ == "__main__":
    try:
        #–∑–∞–ø—É—Å–∫–∞–µ–º –∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é main()
        asyncio.run(main())
    except KeyboardInterrupt:
        # –ï—Å–ª–∏ –Ω–∞–∂–∞–ª–∏ Ctrl+C - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–æ—Ç–∞
        print("\n" + "=" * 50)
        print("üõë –ë–û–¢ –û–°–¢–ê–ù–û–í–õ–ï–ù")
        print("=" * 50)