import asyncio #–¥–ª—è –∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏
import logging #–¥–ª—è –≤—ã–≤–æ–¥–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –≤ –∫–æ–Ω—Å–æ–ª—å
from aiogram import Bot, Dispatcher, Router #–æ—Å–Ω–æ–≤–Ω—ã–µ –∫–ª–∞—Å—Å—ã aiogram
from aiogram.filters import Command #–¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–æ–º–∞–Ω–¥
from aiogram.types import Message #–¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
from config import BOT_TOKEN #–∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ç–æ–∫–µ–Ω –∏–∑ config.py

#–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ(—á—Ç–æ –±—ã –≤–∏–¥–µ—Ç—å —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç)
logging.basicConfig(level=logging.INFO) # –≤—ã–≤–æ–¥–∏–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –≤ –∫–æ–Ω—Å–æ–ª—å

#—Å–æ–∑–¥–∞—ë–º —Ç–µ–ª–æ –±–æ—Ç–∞
bot = Bot(token=BOT_TOKEN)

#–°–æ–∑–¥–∞—ë–º –¥–∏—Å–ø–µ—Ç—á–µ—Ä - —ç—Ç–æ –º–æ–∑–≥ –±–æ—Ç–∞ –∫–æ—Ç–æ—Ä—ã–π —Ä–µ—à–∞–µ—Ç —á—Ç–æ –¥–ª–µ–∞—Ç—å —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
dp = Dispatcher()

#–°–æ–∑–¥–∞—ë–º —Ä–æ—É—Ç–µ—Ä - —ç—Ç–æ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –∫–æ—Ç–æ—Ä—ã–π –Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –∫ –Ω—É–∂–Ω—ã–º —Ñ—É–Ω–∫—Ü–∏—è–º
router = Router()

#–≥–æ–≤–æ—Ä–∏–º –¥–∏—Å–ø–µ—Ç—á–µ—Ä—É –∏—Å–ø–æ–ª—å–∑—É–π —ç—Ç–æ—Ç —Ä–æ—É—Ç–µ—Ä
dp.include_router(router)

#—Å–æ–∑–¥–∞–µ–º –∫–æ–º–º–∞–Ω–¥—É start
#@router.message - —ç—Ç–æ "–î–ï–ö–û–†–ê–¢–û–†", –æ–Ω –æ–±–æ—Ä–∞—á–∏–≤–∞–µ—Ç —Ñ—É–Ω–∫—Ü–∏—é
#Command("start") - –≥–æ–≤–æ—Ä–∏—Ç "—ç—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –∫–æ–º–∞–Ω–¥—ã start"

@router.message(Command("start"))
async def cmd_start(message:Message):
    #message.from_user.first_name - –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ TG
    user_name = message.from_user.first_name

    welcome_text = f"""
–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é —Ç–µ–±—è, {user_name}!
 –Ø –ø–µ—Ä–≤—ã–π —Ç–≥ –±–æ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞ –Ø—Ä–æ—Å–ª–∞–≤,
 –Ω–∞–ø–∏—Å–∞–Ω –Ω–∞ python —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º  aiogram 3.10.0

 –ü–æ–ø—Ä–æ–±—É–π –∫–æ–º–∞–Ω–¥—ã:
 /start - —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ
 /help - –ø–æ–º–æ—â—å
"""
    # –æ—Ç–ø—Ä–æ–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
    # await - –ø–æ–¥–æ–∂–¥–∏ –ø–æ–∫–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å—Å—è
    # message.answer - –º–µ—Ç–æ–¥ –æ—Ç–≤–µ—Ç–∏—Ç—å –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
    await message.answer(welcome_text)

@router.message(Command("help"))
async def cmd_help(message:Message):
    help_text = """
üìö –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –∫–æ–º–∞–Ω–¥:

/start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º
/help - –ü–æ–ª—É—á–∏—Ç—å —Å–ø—Ä–∞–≤–∫—É

üéÆ –ß—Ç–æ —è —É–º–µ—é:
‚Ä¢ –û—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –∫–æ–º–∞–Ω–¥—ã
‚Ä¢ –ü–æ–≤—Ç–æ—Ä—è—Ç—å —Ç–≤–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è

–ü—Ä–æ—Å—Ç–æ –Ω–∞–ø–∏—à–∏ –º–Ω–µ —á—Ç–æ-–Ω–∏–±—É–¥—å! ‚ú®
"""
    await message.answer(help_text)

#—Å–æ–∑–¥–∞—ë–º —ç—Ö–æ –±–æ—Ç
#@router.message() - –ª–æ–≤–∏—Ç –í–°–ï —Å–æ–æ–±—â–µ–Ω–∏—è
@router.message()
async def echo_msg(message:Message):
    #–ø—Ä–æ–≤–µ—Ä—è–µ–º –Ω–µ —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥–æ–π
    if message.text.startswith('/'):
        return
    
    #–ø–æ–ª—É—á–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    user_text = message.text

    #—Ñ–æ—Ä–º–∏—Ä—É–µ–º –æ—Ç–≤–µ—Ç
    response = f"–í—ã –Ω–∞–ø–∏—Å–∞–ª–∏: {user_text}!"

    #–æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –æ—Ç–≤–µ—Ç
    await message.answer(response)

#–≥–ª–∞–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –∑–∞–ø—É—Å–∫–∞
async def main():
    print("=" * 50)  # —Ä–∏—Å—É–µ–º –ª–∏–Ω–∏—é –∏–∑ 50 –∑–Ω–∞–∫–æ–≤ =
    print("ü§ñ –ó–ê–ü–£–°–ö–ê–ï–ú –¢–ï–õ–ï–ì–†–ê–ú-–ë–û–¢–ê...")
    print("=" * 50)
    print("‚úÖ –ë–æ—Ç –∑–∞–ø—É—â–µ–Ω –∏ –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!")
    print("üîç –ò—â–∏—Ç–µ –±–æ—Ç–∞ –≤ Telegram –ø–æ username")
    print("üí¨ –ù–∞–ø–∏—à–∏—Ç–µ –µ–º—É /start")
    print("üõë –ù–∞–∂–º–∏—Ç–µ Ctrl+C –¥–ª—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏")
    print("=" * 50)

    # –∑–∞–ø—É—Å–∫–∞–µ–º –æ–ø—Ä–æ—Å —Å–µ—Ä–≤–µ—Ä–æ–≤ TG
    #start_polling - –ø–æ—Å—Ç–æ—è–Ω–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç: "–ï—Å—Ç—å –ª–∏ –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è"!
    await dp.start_polling(bot)

#–°–æ–∑–¥–∞—ë–º —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –≤ –ø—Ä–æ–≥—Ä–∞–º–º—É
if __name__ == "__main__":
    try:
        #–∑–∞–ø—É—Å–∫–∞–µ–º –∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é —Ñ—É–Ω–∫—Ü–∏—é main()
        asyncio.run(main())
    except KeyboardInterrupt:
        # –ï—Å–ª–∏ –Ω–∞–∂–∞–ª–∏ Ctrl+C - –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –±–æ—Ç–∞
        print("\n" + "=" * 50)
        print("üõë –ë–û–¢ –û–°–¢–ê–ù–û–í–õ–ï–ù")
        print("=" * 50)